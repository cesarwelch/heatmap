(this.webpackJsonpheatmap=this.webpackJsonpheatmap||[]).push([[0],{53:function(e,a,t){},54:function(e,a,t){},56:function(e,a,t){},64:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),c=t(38),i=t.n(c),r=(t(53),t(54),t(23)),u=t.n(r),d=t(39),s=t(28),o=t(9),j=t(40),x=t.n(j),b=t(87),m=t.p+"static/media/manifest2022.46787d1f.jpg",v=t(89),h=t(91),f=t(85),O=function(e,a,t){var l,n=p(e,a);switch(t){case 1:return{data:(l=g(n,1)).data,maxSlider:l.data.length,maxValue:l.maxValue};case 30:return{data:(l=g(n,30)).data,maxSlider:l.data.length,maxValue:l.maxValue};case 60:return{data:(l=g(n,60)).data,maxSlider:l.data.length,maxValue:l.maxValue};case 180:return{data:(l=g(n,180)).data,maxSlider:l.data.length,maxValue:l.maxValue};case"day":return{data:(l=g(n,661)).data,maxSlider:l.data.length,maxValue:l.maxValue};default:case"all":return{data:(l=g(n,8320)).data,maxSlider:l.data.length,maxValue:l.maxValue}}},p=function(e,a){var t=e;return"all"!==a&&(t=e.filter((function(e){return a===new Date(e[0].timestamp).getDate()}))),t},g=function(e,a){for(var t=[],l=[],n=0,c=function(c){for(var i=function(a){var t=l.find((function(t){return t.name===e[c][a].name}));t?t.value+=e[c][a].value:l.push(e[c][a]),e[c][a].value>n&&(n=t?t.value:e[c][a].value)},r=0;r<e[c].length;r++)i(r);!c||c%a!==0&&c!==e.length-1||(t.push(l),l=[])},i=0;i<e.length;i++)c(i);return{data:t,maxValue:n}},y=function(){var e=Object(s.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:3000/","manifest2022.json"));case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){var a=[{value:1,label:"1 Minute"},{value:30,label:"30 Minutes"},{value:60,label:"1 Hour"},{value:180,label:"3 Hours"},{value:"day",label:"Day"}];return"all"===e&&a.push({value:"all",label:"All Event"}),a},S=[{value:25,label:"25th December"},{value:26,label:"26th December"},{value:27,label:"27th December"},{value:"all",label:"All Event"}],D=(t(56),t(92)),w=t(90),k=t(2);function C(e){var a=e.value,t=e.setValue,l=e.options;return Object(k.jsx)(w.a,{value:a,exclusive:!0,unselectable:!0,onChange:function(e,a){a&&t(a)},"aria-label":"text alignment",style:{background:"white"},color:"primary",children:l.map((function(e,a){return Object(k.jsx)(D.a,{value:e.value,"aria-label":"left aligned",children:e.label},"".concat(a,"-toggleButton"))}))})}function A(){var e=Object(l.useState)({25:{1:[],30:[],60:[],180:[],day:[]},26:{1:[],30:[],60:[],180:[],day:[]},27:{1:[],30:[],60:[],180:[],day:[]},all:{1:[],30:[],60:[],180:[],day:[],all:[]}}),a=Object(o.a)(e,2),t=a[0],n=a[1],c=Object(l.useState)(),i=Object(o.a)(c,2),r=i[0],j=i[1],p=Object(l.useState)({data:[],maxSlider:0,maxValue:0}),g=Object(o.a)(p,2),D=g[0],w=g[1],A=Object(l.useState)([]),E=Object(o.a)(A,2),B=E[0],F=E[1],H=Object(l.useState)(0),L=Object(o.a)(H,2),M=L[0],N=L[1],P=Object(l.useState)(100),I=Object(o.a)(P,1)[0],J=Object(h.a)(!1),T=Object(o.a)(J,2),q=T[0],z=T[1],G=Object(l.useState)(1),K=Object(o.a)(G,2),Q=K[0],R=K[1],U=Object(l.useState)(25),W=Object(o.a)(U,2),X=W[0],Y=W[1];Object(f.a)((function(){D.maxSlider>M?(N(M+1),F(D.data[M])):z(!1)}),q?I:null);var Z=Object(l.useCallback)(Object(s.a)(u.a.mark((function e(){var a,l,c,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[X][Q].maxSlider){e.next=4;break}w(t[X][Q]),e.next=17;break;case 4:return e.next=6,y();case 6:l=e.sent,console.log("\ud83d\ude80 ~ file: Heatmap.js ~ line 64 ~ getData ~ returnData",l.length),c=0,i=0,r=0,l.forEach((function(e){var a,t,l,n,u,d;(null===e||void 0===e||null===(a=e[0])||void 0===a||null===(t=a.timestamp)||void 0===t?void 0:t.includes("2022-01-25"))&&(c+=null===e||void 0===e?void 0:e.length),(null===e||void 0===e||null===(l=e[0])||void 0===l||null===(n=l.timestamp)||void 0===n?void 0:n.includes("2022-01-26"))&&i++,(null===e||void 0===e||null===(u=e[0])||void 0===u||null===(d=u.timestamp)||void 0===d?void 0:d.includes("2022-01-27"))&&r++})),console.log(c,i,r,"counter"),a=O(l,X,Q),console.log("\ud83d\ude80 ~ file: Heatmap.js ~ line 60 ~ getData ~ transformedData",a.length),n((function(e){var t=Object(d.a)({},e);return t[X][Q]=a,t})),w(a);case 17:case"end":return e.stop()}}),e)}))),[X,Q]);Object(l.useEffect)((function(){Z()}),[X,Q,Z]),Object(l.useEffect)((function(){var e;if(0===(null===D||void 0===D||null===(e=D.data)||void 0===e?void 0:e.length)&&Z(),0===D.maxSlider&&!r){var a=x.a.create({container:document.querySelector(".heatmap"),minOpacity:".4",gradient:{".01":"blue",".25":"cyan",".5":"yellow",".75":"orange",1:"red"}});j(a)}if(D.maxSlider>0&&r){var t={max:D.maxValue,min:0,data:D.data[M]};r&&r.setData(t)}}),[r,Z]);return Object(l.useEffect)((function(){var e={max:D.maxValue,min:0,data:B};r&&B.length>0&&r.setData(e)}),[r,D,B]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{style:{width:"600px",paddingBottom:"1rem",textAlign:"left",fontSize:"1.5rem"},children:Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{style:{paddingBottom:"1rem"},children:[Object(k.jsx)("div",{children:Object(k.jsx)("span",{children:"Granularity"})}),Object(k.jsx)(C,{value:Q,setValue:function(e){N(0),R(e)},options:V(X)})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{children:Object(k.jsx)("span",{children:"Date"})}),Object(k.jsx)("div",{children:Object(k.jsx)(C,{value:X,setValue:function(e){N(0),Y(e),"all"!==e&&R(1)},options:S})})]})]})}),Object(k.jsxs)("div",{style:{display:"flex"},children:[Object(k.jsx)("div",{id:"mydiv",className:"heatmap",style:{display:"block"},children:Object(k.jsx)("img",{height:"651px",width:"990px",src:m,alt:"road"})}),Object(k.jsxs)("div",{style:{textAlign:"left",paddingLeft:"2rem"},children:[Object(k.jsxs)("div",{children:["blue: 0 - ",.01*D.maxValue]}),Object(k.jsxs)("div",{children:["cyan: ",.01*D.maxValue," - ",.25*D.maxValue]}),Object(k.jsxs)("div",{children:["yellow: ",.25*D.maxValue," - ",.5*D.maxValue]}),Object(k.jsxs)("div",{children:["orange: ",.5*D.maxValue," - ",.75*D.maxValue]}),Object(k.jsxs)("div",{children:["red: ",.75*D.maxValue," - ",D.maxValue]}),D.maxSlider>1&&Object(k.jsx)(v.a,{variant:"outlined",style:{background:"white"},onClick:z,children:q?"Cancel":"Auto Play"})]})]}),Object(k.jsx)("div",{style:{width:"600px"},children:D.maxSlider>1&&Object(k.jsx)(b.a,{max:D.maxSlider-1||0,defaultValue:0,"aria-label":"Default",valueLabelDisplay:"auto",onChange:function(e,a){q&&z(!1),F(D.data[a]),N(a)},value:M})})]})}var E=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)("header",{className:"App-header",children:Object(k.jsx)(A,{})})})},B=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,94)).then((function(a){var t=a.getCLS,l=a.getFID,n=a.getFCP,c=a.getLCP,i=a.getTTFB;t(e),l(e),n(e),c(e),i(e)}))};i.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(E,{})}),document.getElementById("root")),B()}},[[64,1,2]]]);
//# sourceMappingURL=main.44bb46db.chunk.js.map